<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.gada.travelgada.mapper.SearchMapper"> 

	<select id="getSearchPlanner" resultType="com.gada.travelgada.domain.PlannerVO"> 
		<![CDATA[ 
			select * from (
				select @rownum:=@rownum+1 rn,p.* from planner p 
					where planner_name like CONCAT('%', #{Keyword}, '%') and (@rownum:=0)=0
			)a where a.rn <= 2
		]]> 
	</select> 
	
	<select id="getSearchDiary" resultType="com.gada.travelgada.domain.DiaryVO"> 
		<![CDATA[ 
			select * from (
				select @rownum:=@rownum+1 rn,d.* from diary d 
					where text like CONCAT('%', #{Keyword}, '%') or hashtag like CONCAT('%', #{Keyword}, '%') 
						and (@rownum:=0)=0
			)a where a.rn <= 8;
		]]> 
	</select> 


</mapper>
